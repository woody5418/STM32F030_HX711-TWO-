/********************************************************************
 *@file        websocket.h
 *@author      Woody      QQ2490006131
 *@version     V1.0
 *@date        2017-07-26
 *@brief
 *******************************************************************/
#ifndef __WEBSOCKET_H_
#define __WEBSOCKET_H_
#include "stm32f0xx.h"
#include "stdbool.h"

void sendMessagePacket(char * message);

/**
 *  link:http://www.cnblogs.com/lizhenghn/p/5155933.html
 *
 *	0							  1								2							  3
 * +！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！+
 * | 0| 1| 2| 3| 4| 5| 6| 7| 8| 9| 0| 1| 2| 3| 4| 5| 6| 7| 8| 9| 0| 1| 2| 3| 4| 5| 6| 7| 8| 9| 0| 1|
 * +！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！+
 * | F| R| R| R| opcode(4) | M|   payload len(7)   |         Extended payload length(16/64)        |
 * | I| S| S| S|           | A|                    |            if( payload len==126/127)          |
 * | N| V| V| V|           | S|                    |                                               |
 * |  | 1| 2| 3|           | K|                    |                                               |
 * +！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！+
 * |                   Extened payload length continued, if payload len == 127                     |
 * +-----------------------------------------------------------------------------------------------+
 * |                                               |         Masking-key, if MASK set to 1         |
 * +------------------------------------------------***********************************************+
 * |             Masking-key(continued)            |          Payload Data                         |
 * +***********************************************！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！+
 * |                                     Payload Data continued                                    |
 * +！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！+
 * |                                     Payload Data continued                                    |
 * +！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！+
 *
 */
typedef struct
{
    bool fin;
    uint8_t rsvs;
    uint8_t opcode;
    int payloadlen;
    bool masked;
    uint8_t maskkey[4];
} WebSocketFrame;

#endif






